"""
POKER BOT 
skapad 21/11/2025
skapare Lloyd Björnstedt
senaste uppdatering:


"""

from itertools import combinations


färg_list = [] 
valör_list = []
hand_rang = []


def player_input():
    färg, valör = input(f"kort {len(valör_list) + 1}: ").split(" ")  # ValueError om inte split

    if valör == "knäckt":
        valör = 11

    elif valör == "dam":
        valör = 12

    elif valör == "kung":
        valör = 13

    elif valör == "ess":
        valör = 14

    färg_list.append(färg)
    valör_list.append(int(valör))
    #färg_dict[färg] += 1
    #valör_dict[int(valör)] += 1



def färg_steg():
    pass

def stege(lista):
    count = 1

    if 14 in lista:
        lista.append(1)

    for i in range(1,len(lista)):
        if lista[i] == lista[i-1] + 1:
           count += 1
        else:
            count = 1

    if count == 5:
        return True
    
def tvåpar(lista):
    antal_par = 0

    for i in lista:
        if lista.count(i) == 2:
            antal_par += 1

    if antal_par >= 2:
        return True
        
def par_triss_fyrtal(antal, lista):
    for i in lista:
        if lista.count(i) == antal:
            return True

def high_card(lista):
    if sorted(lista)[-1] == 14:
        hc = "ess"

    elif sorted(lista)[-1] == 13:
        hc = "kung"

    elif sorted(lista)[-1] == 12:
        hc = "dam"

    elif sorted(lista)[-1] == 11:
        hc = "knäckt"

    elif sorted(lista)[-1] == 10:
        hc = 10

    else:
        hc = int(sorted(lista)[-1])

    return hc



def pre_flop_eval(hand,rang):
    #rangordnar korten i pre flop
    if par_triss_fyrtal(2,hand):
        rang.append(1)
    else: 
        return rang.append(0)

def hand_eval(alla_komb,rang):
    #rangordnar alla möjliga 5 kort händer (0-8)

    for hand in alla_komb:
        # färgstege = 8

        # fyrtal = 7
        if par_triss_fyrtal(4, hand):
            rang.append(7)

        # kåk = 6
        elif par_triss_fyrtal(2, hand) and par_triss_fyrtal(3, hand):
            rang.append(6)

        # färg = 5
        elif par_triss_fyrtal(5,färg_list):
            rang.append(5)

        # stege = 4
        elif stege(sorted(hand)):
            rang.append(4)

        # triss = 3
        elif par_triss_fyrtal(3, hand):
            rang.append(3)

        # tvåpar = 2
        elif tvåpar(hand):
            rang.append(2)

        # par = 1
        elif par_triss_fyrtal(2, hand):
            rang.append(1)

        # högt kort = 0
        else:
            rang.append(0)
    
    return rang

def hand_trans(bäst):
    bäst = sorted(bäst)[-1]

    if bäst == 8: 
        return "färgstege"

    elif bäst == 7:
        return "fyrtal"

    elif bäst == 6:
        return "kåk"

    elif bäst == 5:
        return "färg"

    elif bäst == 4:
        return "stege"

    elif bäst == 3:
        return "triss"

    elif bäst == 2:
        return "tvåpar"

    elif bäst == 1:
        return "par"

    elif bäst == 0:
        return f"högt kort ({high_card(valör_list)})"



print("Pre-flop")
for i in range(2):
    player_input()

pre_flop_eval(valör_list,hand_rang)
print(hand_trans(hand_rang))
print("\n------------------------------------------\n")


print("Flop")
for i in range(3):
    player_input()

hand_eval(list(combinations(valör_list,5)),hand_rang)
print(hand_trans(hand_rang))
print("\n------------------------------------------\n")


print("Turn")
player_input()

hand_eval(list(combinations(valör_list,5)),hand_rang)
print(hand_trans(hand_rang))
print("\n------------------------------------------\n")


print("River")
player_input()

hand_eval(list(combinations(valör_list,5)),hand_rang)
print(hand_trans(hand_rang))
print("\n------------------------------------------\n")



print(färg_list)
print(valör_list)
print(list(combinations(valör_list,5)))
print(len(list(combinations(valör_list,5))))